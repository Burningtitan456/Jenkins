pipeline{
    agent any
    environment {
        DIRECTORY_PATH= "Documents/Code"
        TESTING_ENVIRONMENT= "Test"
        PRODUCTION_ENVIRONMENT= "Taine"
    }
    stages{
        stage('Build'){
            steps{
                echo "compile and package code with Maven"
            }
        }
        stage('UnitTest'){
            steps{
                echo "Run unit tests with Mocha"
            }
        }
        stage('Analyse'){
            steps{
                echo "Analyse code using SonarQube"
            }
        }
        stage('Scan'){
            steps{
                echo "Perform security scan using Nessus"
            }
            post{
                success {
                    mail to: "tainemarkley@gmail.com",
                    subject: "Scan Status Email",
                    body: "Scan was succesful!"
                    emailext attachLog: true, body: '', subject: ''
                }
            }
        }
        stage('DeployStage'){
            steps{
                echo "Deploy application to staging server"
            }
        }
        stage('IntTest'){
            steps{
                echo "Run integration tests"
            }
            post{
                success{
                    mail to: "tainemarkley@gmail.com",
                    subject: "Test Status Email",
                    body: "Test was successful!"
                    emailext attachLog: true, body: '', subject: ''
                }
            }
        }
        stage('DeployProduction'){
            steps{
                echo "Deploy to production server"
            }
        }
    }
}
